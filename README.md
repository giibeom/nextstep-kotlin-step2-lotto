# kotlin-lotto

## 미션 피드백 링크

- Step 1 : [https://github.com/next-step/kotlin-lotto/pull/849](https://github.com/next-step/kotlin-lotto/pull/849)
- Step 2 : [https://github.com/next-step/kotlin-lotto/pull/939](https://github.com/next-step/kotlin-lotto/pull/939)
- Step 3 : [https://github.com/next-step/kotlin-lotto/pull/957](https://github.com/next-step/kotlin-lotto/pull/957)

## 미션 내용

### STEP 1

<details>
<summary>접기/펼치기</summary>
<div markdown="1">

#### [요구 사항 분석]

- 쉼표(,)와 콜론(:) 구분자로 가진 문자열이 들어오면 각각 숫자 분리 후 총 합을 반환
- 쉼표와 콜론을 제외하고도 커스텀 구분자 지정 가능 ("//"와 "\n" 사이에 위치하는 문자)
  - 문자열 맨 앞에 "//"와 "\n" 가 존재하면, 그 사이에 있는 문자가 커스텀 구분자
  - `"//$\n1,2:3$4"` 이라면 "$"이 커스텀 구분자이고 합은 10(1+2+3+4) 반환
- 숫자 이외에 값, 음수가 전달되면 `RuntimeException` 예외 발생

#### [기능 목록]

- [x] 계산기 객체는 숫자 목록이 들어오면 각 숫자의 총 합을 반환한다.
- [x] 구분자 객체는 쉼표(,)를 구분자로 가진 문자열이 들어오면 숫자 목록으로 반환한다.
- [x] 구분자 객체는 콜론(:)를 구분자로 가진 문자열이 들어오면 숫자 목록으로 반환한다.
- [x] 구분자 객체는 쉼표(,)와 콜론(:) 구분자 여러개가 섞여서 들어와도 숫자 목록으로 반환한다.
- [x] 구분자 객체는 커스텀 구분자를 가진 문자열이 들어오면 숫자 목록으로 반환한다.
- [x] 숫자 이외의 값이 들어오면 RuntimeException 예외가 발생한다.
- [x] 음수가 들어오면 RuntimeException 예외가 발생한다.

#### [책임 분리]

- 입력 객체
  - 유효성 검사
- 계산기 객체
  - 각 숫자들의 총 합 계산
- 구분자 객체
  - 구분자 저장(관리)
  - 커스텀 구분자 판별
  - 각 구분자를 기준으로 숫자 분리

#### [피드백]

- [x] 입력값 분석 객체의 과도한 역할과 책임을 분리한다.
- [x] 각 객체들의 협력을 위한 StringCalculator 도메인 객체를 생성한다.
- [x] 객체가 생성된 이후, 별다른 준비과정없이 자신의 책임을 수행하기만하면 되는 상태로 수정한다.
- [x] 변수명과 메서드명을 명확해지도록 수정한다.

</div>
</details>

<br>

### STEP 2

<details>
<summary>접기/펼치기</summary>
<div markdown="1">

#### [요구 사항 분석]

- 로또 구입 금액 입력 시 구입 금액에 해당하는 로또 발급
- 로또 1장 가격은 1000원
- UI를 제외한 모든 로직에 단위 테스트(가급적 TDD)
- indent depth 2를 넘지 않기
- 함수 길이 15라인 이하

#### [기능 목록]

- [x] 구입 금액 기준으로 몇 회의 로또 게임이 가능한지 계산한다.
- [x] 로또 게임 1회 당 6개의 랜덤 번호를 받는다.
- [x] 구입 금액 만큼 게임 결과를 출력한다.
- [x] 지난 주 당첨 번호를 관리한다.
- [x] 로또 게임 1회에 대한 당첨 여부를 확인한다.
- [x] 로또 게임의 총 당첨 통계를 관리한다.
- [x] 로또 게임의 총 수익률을 계산한다.

#### [책임 분리]

- 로또 게임 (각 객체의 협력 객체)
  - 구입 금액 기준 로또 구입 가능 개수 계산
  - 당첨 통계 (몇등이 몇번인지)
  - 수익률 계산
- 로또 번호
  - 로또 번호 45개 관리
  - 6개 번호 랜덤 생성
- 당첨
  - 당첨 번호 관리
  - 당첨 여부 확인
- 당첨금
  - 각 등수의 당첨금 관리

#### [피드백]

- [x] 로또 게임(LottoGame) 객체를 제거하고 각 객체의 협력을 정리하기
- [x] 랜덤 번호 생성 역할을 새로운 객체로 분리한다

</div>
</details>

<br>

### STEP 3

<details>
<summary>접기/펼치기</summary>
<div markdown="1">

#### [요구 사항 분석]

- 2등을 위한 보너스 번호(추가 번호) 하나를 더 추첨
- 당첨 통계에 2등도 추가

#### [기능 목록]

- [x] 보너스 볼을 추가로 받아 관리한다.
- [x] 기본 숫자 5개가 일치할 때 보너스 볼까지 일치하면 2등으로 상금은 3000만원이다.
- [x] 기본 숫자 5개가 일치할 때 보너스 볼이 일치하지 않으면 3등으로 상금은 150만원이다.
- [x] 통합 테스트 진행
  - [x] 로또 구매 통합 테스트
  - [x] 로또 결과 분석 통합 테스트

#### [피드백 반영]

- [x] 로또 번호를 원시 타입으로 포장한다.
- [x] 당첨 번호 목록에 size 제약을 건다.
- [x] 일급 컬렉션(LottoTickets)을 의미 있게 사용할 수 있도록 비즈니스 로직을 위임하거나, 제거한다.

</div>
</details>

<br>

### STEP 4

#### [피드백 반영]

- [x] 로또 번호를 원시 타입으로 포장한다 (https://github.com/next-step/kotlin-lotto/pull/957#discussion_r1398365801)
- [x] 당첨 로또와 총 등수를 담당하는 도메인 모델 객체를 추가하여 역할을
  응집한다 (https://github.com/next-step/kotlin-lotto/pull/957#discussion_r1398366321)

#### [요구 사항 분석]

- 수동 로또 기능 구현
- 수동 로또 구매 후 남은 차액은 모두 자동으로 구매

####[기능 목록]

- [x] 구입 금액에서 구매할 수동 로또 수를 뺀 나머지 차액은 모두 자동 로또 수로 계산한다
- [x] 수동 로또 입력 번호를 관리한다
